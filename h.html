<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EFDA API Request</title>
</head>
<body>
  <h2>Check console for response...</h2>

  <script>
    async function fetchData() {
      const formData = new FormData();
      formData.append("start", "0");
      formData.append("length", "25");
      formData.append("search[value]", "");
      formData.append("draw", "0");
      formData.append("submoduleTypeCode", "");
      formData.append("userId", "14448");

      const columns = [
        "id", "importPermitNumber", "applicationId", "importPermitStatusCode",
        "requestedDate", "importPermitStatusDisplayName", "performaInvoiceNumber",
        "assignedUser", "portOfEntrySH", "supplierName", "agentName",
        "submissionDate", "decisionDate", "amount"
      ];

      columns.forEach((col, i) => {
        formData.append(`columns[${i}][data]`, col);
        formData.append(`columns[${i}][orderable]`, "true");
        formData.append(`columns[${i}][searchable]`, "true");
      });

      try {
        const response = await fetch("https://api.eris.efda.gov.et/api/ImportPermit/List", {
          method: "POST",
          headers: {
            "Authorization": "Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6ImF0K2p3dCJ9.eyJuYmYiOjE3NTE3MTg1NTMsImV4cCI6MTc1MTgwNDk1MywiaXNzIjoiaHR0cHM6Ly9pZC5lcmlzLmVmZGEuZ292LmV0IiwiYXVkIjoiaHR0cHM6Ly9pZC5lcmlzLmVmZGEuZ292LmV0L3Jlc291cmNlcyIsImNsaWVudF9pZCI6ImVyaXMtcG9ydGFsLXNwYSIsInN1YiI6IjA5NzA0MTM5NDYiLCJhdXRoX3RpbWUiOjE3NTE3MTg1NDgsImlkcCI6ImxvY2FsIiwicGhvbmVfbnVtYmVyIjoiOTcwNDEzOTQ2IiwiZW1haWwiOiJhdHR0MjAwN0BnbWFpbC5jb20iLCJnaXZlbl9uYW1lIjoiQW50ZW5laCBUYXllIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9wcmltYXJ5c2lkIjoiMTQ0NDgiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiMDk3MDQxMzk0NiIsInVzZXJJZCI6IjE0NDQ4IiwiYnJhbmNoSWQiOiIiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJJUCBBcHBsaWNhbnQiLCJyb2xlQ29kZXMiOiJJUEEiLCJqdGkiOiJBNkM1RkFDRDIyRUExRUY5MDFFQjA1RTE1MENDRkJDNiIsInNpZCI6IjAxREM2OTAzRDE2MkVENzlGRDEyMENBMjQzRDZCODBBIiwiaWF0IjoxNzUxNzE4NTUzLCJzY29wZSI6WyJvcGVuaWQiLCJwcm9maWxlIl0sImFtciI6WyJwd2QiXX0.bQJLH-SsX39j3C4_jA4OUfGHGl96vhuZxC69S_dKSWPWm7wUjPKnfvE1XpusMl6mYEy5kzccHnYro1q4IA9BozPlAREYJ8r8kA3B2ma0EsKs9_w2PvtM51VFf6slOVkKFqdPYUxtcRv46nlyINhqV0gxNE1BNVTghyCdSlWe0EMb6LWnz76osR1FxBSV0ssfFPDDlrpgXQqeqZyZN98ZWzTMREM6NLDUy2iWyYtA7leVewKwFF6iIOIQwWvx3NZi32W0zGqC2dmcH04y_U_6-BAscDx6KYJB-skTDB-KOJfbDM_wP5v86EfzY13PLJO01QeZtYvwyX3i_tuUt3nhjg"
          },
          body: formData
        });

        const data = await response.json();
        console.log("API Response:", data);
      } catch (error) {
        console.error("Request failed:", error);
      }
    }

    fetchData();
  </script>
</body>
</html>
